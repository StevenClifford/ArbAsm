filetype: arbasm

detect:
    filename: "\\.(aa|aasm|arbasm)$"

rules:
    # This file is made for Arbitrary Assembly, it is adapted from the NASM assembly file from micro itself

    ## Instructions
    - statement: "\\b(?i)(set|dset|dget|rev|sel|ins|cton|ntoc|inc|dec|add|sub|mul|div|mod|rand|root|cmp|ucmp|rot|shf|app|trun|print|nprint|sprint|fread|fwrite|input|sinput|len|dset|dget)(?-i)\\b"
    - statement: "\\b(?i)(push|pop|peek|flip|ret)(?-i)\\b"
    - symbol.operator: "([,+]|)"
    ## Quaternion operations
    - statement: "\\b(?i)(qset|qprint|qdset|qdget|qadd|qsub|scmul|scdiv|scmod|qmul|qdiv|qmod|conj|pysq|vshf)(?-i)\\b"
    - statement: "\\b(?i)(qpush|qpop|qflip|qret)(?-i)\\b"

      ## Registers
    - identifier: "\\b(?i)(gr1|gr2|gr3|gr4|ans|ir|flag|inplen|endian|stacsz|mstptr|rstptr|ptime|time|loop)(?-i)\\b"
    - identifier: "\\b(?i)(qr1|qr2|qr3|qr4|qns)(?-i)\\b"

      ## Constants
      # Number - it works
    - constant.number: "\\b[0-9 \ ijk]+\\b"
    - constant.number: "([-]|)"

      ## Other
    - statement: "\\b(?i)(run|SAVE|LOAD)(?-i)\\b"
    - statement: "([>])"
    - statement: "\\b(?i)(Ce|Cg|Cs)(?-i)\\b"

    - constant.string:
        start: "\""
        end: "\""
        skip: "\\\\."
        rules:
            - constant.specialChar: "\\\\."

    - comment:
        start: ";"
        end: "$"
        rules:
            - todo: "(TODO|XXX|FIXME|rst|mst|--|[)]|[(]):?"
